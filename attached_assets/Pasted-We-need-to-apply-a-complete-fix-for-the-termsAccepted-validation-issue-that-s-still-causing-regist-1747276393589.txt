We need to apply a complete fix for the `termsAccepted` validation issue thatâ€™s still causing registration to fail, even when the Terms of Service checkbox is checked.

The frontend already sends the correct boolean `true`, and Zod validation enforces it. But multiple parts of the backend and one default in the frontend still cause the error.

---

### ğŸ”§ PART 1 â€” Fix All Affected Backend Files

Apply this fix in the following files:

#### âœ… In `/server/routes.ts`, `/server/routes/auth.routes.ts`, and `/server/routes/auth.routes.fixed.ts`:

For **every block** where this condition appears:
```ts
if (!email || !password || !phone || !address || termsAccepted !== true)
â¡ Add the following normalization before the condition:

ts
Copy
Edit
const termsAccepted = req.body.termsAccepted === true || req.body.termsAccepted === 'true';
This ensures termsAccepted is consistently interpreted as true, regardless of whether itâ€™s passed as a boolean or a string.

âœ… Apply this in every location itâ€™s used â€” not just the first occurrence. There are at least two instances in both auth.routes.ts and auth.routes.fixed.ts.

ğŸ”§ PART 2 â€” Fix Default in BusinessSignupForm
ğŸ“ File: client/src/components/auth/BusinessSignupForm.tsx

Find and remove or replace this line:

ts
Copy
Edit
termsAccepted: false,
â¡ This is dangerous and can override the correct checkbox state. Replace it with proper checkbox-driven state logic using:

tsx
Copy
Edit
setValue("termsAccepted", !!checked, {
  shouldValidate: true,
  shouldDirty: true,
});
â€¦and register the field using:

tsx
Copy
Edit
<input type="hidden" {...register("termsAccepted")} />
âœ… After Applying All Fixes
The form will:

Validate the checkbox properly using Zod

Send the correct data to the backend

Be accepted by the backend with no false rejections

The error â€œYou must accept Terms of Serviceâ€ should no longer appear when the checkbox is checked.

Please apply all changes thoroughly. This is the final fix across all layers of the app.

yaml
Copy
Edit
