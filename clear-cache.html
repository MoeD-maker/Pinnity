<!DOCTYPE html>
<html>
<head>
    <title>Clear Cache and Storage</title>
</head>
<body>
    <h1>Clearing all cached data...</h1>
    <script>
        // Clear all localStorage
        localStorage.clear();
        
        // Clear all sessionStorage
        sessionStorage.clear();
        
        // Clear IndexedDB (used by React Query for persistence)
        if ('indexedDB' in window) {
            indexedDB.databases().then(databases => {
                databases.forEach(db => {
                    if (db.name) {
                        indexedDB.deleteDatabase(db.name);
                    }
                });
            }).catch(console.error);
        }
        
        // Clear any service worker cache
        if ('serviceWorker' in navigator && 'caches' in window) {
            caches.keys().then(cacheNames => {
                return Promise.all(
                    cacheNames.map(cacheName => caches.delete(cacheName))
                );
            }).then(() => {
                console.log('All caches cleared');
            });
        }
        
        document.body.innerHTML = '<h1>Cache cleared! Please close this tab and refresh your main app.</h1>';
        
        // Auto-redirect back to main app after 2 seconds
        setTimeout(() => {
            window.location.href = '/';
        }, 2000);
    </script>
</body>
</html>